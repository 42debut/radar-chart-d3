var RadarChart={draw:function(e,t,n){var r={radius:7,w:600,h:600,factor:1,factorLegend:.85,total:4,levels:4,maxValue:1e3,radians:2*Math.PI,minDistance:50};if(n!=undefined){for(var i in n){r[i]=n[i]}}r.maxValue=d3.max(t,function(e){return Math.max.apply(Math,e.map(function(e){return e.value}))});var s=t[0].map(function(e,t){return e.axis});total=s.length;var o=r.factor*Math.min(r.w/2,r.h/2);var u=d3.select(e).append("svg").attr("width",r.w).attr("height",r.h).append("g");for(var a=0;a<r.levels;a++){var f=r.factor*o*((a+1)/r.levels);u.selectAll(".levels").data(s).enter().append("svg:line").attr("x1",function(e,t){return f*(1-r.factor*Math.sin(t*r.radians/total))}).attr("y1",function(e,t){return f*(1-r.factor*Math.cos(t*r.radians/total))}).attr("x2",function(e,t){return f*(1-r.factor*Math.sin((t+1)*r.radians/total))}).attr("y2",function(e,t){return f*(1-r.factor*Math.cos((t+1)*r.radians/total))}).attr("class","line").style("stroke","grey").style("stroke-width","0.5px").attr("transform","translate("+(r.w/2-f)+", "+(r.h/2-f)+")");}var l=d3.scale.category10();series=0;for(x in t){dataValues=[];y=t[x];d3.select(e+" g").selectAll(".nodes").data(y,function(e,t){dataValues.push([r.w/2*(1-parseFloat(Math.max(e.value,0))/r.maxValue*r.factor*Math.sin(t*r.radians/total)),r.h/2*(1-parseFloat(Math.max(e.value,0))/r.maxValue*r.factor*Math.cos(t*r.radians/total))])});dataValues.push(dataValues[0]);d3.select(e+" g").selectAll(".area").data([dataValues]).enter().append("path").style("fill",function(e,t){return l(series)}).style("fill-opacity",.5).attr("d",d3.svg.area());series++}series=0;for(x in t){y=t[x];d3.select(e+" g").selectAll(".nodes").data(y).enter().append("svg:circle").attr("r",r.radius).attr("alt",function(e){return Math.max(e.value,0)}).attr("cx",function(e,t){dataValues.push([r.w/2*(1-parseFloat(Math.max(e.value,0))/r.maxValue*r.factor*Math.sin(t*r.radians/total)),r.h/2*(1-parseFloat(Math.max(e.value,0))/r.maxValue*r.factor*Math.cos(t*r.radians/total))]);return r.w/2*(1-Math.max(e.value,0)/r.maxValue*r.factor*Math.sin(t*r.radians/total))}).attr("cy",function(e,t){return r.h/2*(1-Math.max(e.value,0)/r.maxValue*r.factor*Math.cos(t*r.radians/total))}).attr("data-id",function(e){return e.axis}).style("fill",l(series)).style("fill-opacity",.9).style("stroke","black").append("svg:title").text(function(e){return Math.max(e.value,0)});series++}var c=u.selectAll(".axis").data(s).enter().append("g").attr("class","axis");c.append("line").attr("x1",r.w/2).attr("y1",r.h/2).attr("x2",function(e,t){return r.w/2*(1-r.factor*Math.sin(t*r.radians/total))}).attr("y2",function(e,t){return r.h/2*(1-r.factor*Math.cos(t*r.radians/total))}).attr("class","line").style("stroke","grey").style("stroke-width","1px");c.append("text").attr("class","legend").text(function(e){return e}).style("font-family","sans-serif").style("font-size","12px").attr("transform",function(e,t){return"translate(0, -10)"}).attr("x",function(e,t){return r.w/2*(1-r.factorLegend*Math.sin(t*r.radians/total))-20*Math.sin(t*r.radians/total)}).attr("y",function(e,t){return r.h/2*(1-r.factorLegend*Math.cos(t*r.radians/total))-20*Math.cos(t*r.radians/total)})}}